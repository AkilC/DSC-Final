<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" http-equiv="Content-Type" content="text/html, charset=utf-8" />

        <title>Far East Gallery</title>

        <!-- Babylon.js -->
        <script src="https://code.jquery.com/pep/0.4.2/pep.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script>
        <script src="https://cdn.babylonjs.com/ammo.js"></script>
        <script src="https://cdn.babylonjs.com/cannon.js"></script>
        <script src="https://cdn.babylonjs.com/Oimo.js"></script>
        <script src="https://cdn.babylonjs.com/earcut.min.js"></script>
        <script src="https://cdn.babylonjs.com/babylon.js"></script>
        <script src="https://cdn.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
        <script src="https://cdn.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
        <script src="https://cdn.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
        <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.js"></script>
        <script src="https://cdn.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
        <script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script>
        <script src="https://cdn.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
        <script type="text/javascript">WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"]  }});</script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/6.4.5/swiper-bundle.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/6.4.5/swiper-bundle.css">

        <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
        <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>

        <style>
            html, body {
                overflow: hidden;
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
                font-family: Montserrat;
                font-weight: 500;
            }

            #renderCanvas {
                width: 100%;
                height: 100%;
                touch-action: none;
                outline: none;
                position: absolute;
            }

            #gallery-wrapper {
                position: block;
                opacity: 0;
            }

            #gallery-wrapper2 {
                position: block;
                opacity: 0;
            }

            #gallery-box {
                position: absolute;
                width: 100vw;
                height: 100vh;
                z-index: 2000;
                background-color: #000000;
                opacity: 50%;
                top: 50%;  /* position the top  edge of the element at the middle of the parent */
                left: 50%; /* position the left edge of the element at the middle of the parent */
                transform: translate(-50%, -50%); /* center */
            }

            #gallery-box2 {
                position: absolute;
                width: 100vw;
                height: 100vh;
                z-index: 2000;
                background-color: #000000;
                opacity: 50%;
                top: 50%;  /* position the top  edge of the element at the middle of the parent */
                left: 50%; /* position the left edge of the element at the middle of the parent */
                transform: translate(-50%, -50%); /* center */
            }

            .swiper-container {
                position: absolute;
                width: 60vw;
                height: 60vh;
                top: 50%;  /* position the top  edge of the element at the middle of the parent */
                left: 50%; /* position the left edge of the element at the middle of the parent */
                transform: translate(-50%, -50%); /* center */
                z-index: 3000;
            }

                .swiper-slide {
                text-align: center;
                font-size: 18px;
                background: #fff;

                /* Center slide text vertically */
                display: -webkit-box;
                display: -ms-flexbox;
                display: -webkit-flex;
                display: flex;
                -webkit-box-pack: center;
                -ms-flex-pack: center;
                -webkit-justify-content: center;
                justify-content: center;
                -webkit-box-align: center;
                -ms-flex-align: center;
                -webkit-align-items: center;
                align-items: center;
            }

            #model {
                position: absolute;
                background-color: #fff;
                width: 100%;
                height: 100%;
                top: 50%;  /* position the top  edge of the element at the middle of the parent */
                left: 50%; /* position the left edge of the element at the middle of the parent */
                transform: translate(-50%, -50%); /* center */
                z-index: 3000;
            }
            #qr {
                position: absolute;
                width: 80px;
                height: 80px;
                top: 25px;
                right: 20px;
                z-index: 9999999;
            }

            #qr-text {
                position: absolute;
                font-family: Arial, Helvetica, sans-serif;
                font-weight: bold;
                font-size: 12px;
                top: 0;
                right: 5px;
                z-index: 9999999;
            }
            .button {
                background-color: #000000;
                border: 1px solid #ffffff;
                color: white;
                padding: 15px 32px;
                border-radius: 4px;
                text-align: center;
                text-decoration: none;
                position: absolute;
                font-size: 16px;
                margin: 4px 2px;
                cursor: pointer;
                z-index: 3000;
                top: 87vh;  /* position the top  edge of the element at the middle of the parent */
                left: 50vw; /* position the left edge of the element at the middle of the parent */
                transform: translate(-50%, -50%);
                opacity: 100% !important;
                font-family: Montserrat;
                font-weight: 600;
            }
        </style>
        <script
        src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous"></script>
          <script src="https://js.stripe.com/v3/"></script>
            <script>
            var data;
            $(document).ready(function() {
                var sessionHost = "https://us-central1-market-checkout.cloudfunctions.net/getCheckoutSession";
              var successUrl = "https://immersivemarket.netlify.app/thankyou.html";
              var cancelUrl = "https://immersivemarket.netlify.app/art.html";
              var url = sessionHost + '/getCheckoutSession?successUrl=' + successUrl + '&cancelUrl=' + cancelUrl;
              $.ajax({type: "GET", url: url, headers: {"Access-Control-Allow-Origin": "allow"}}).done(function (data) {
                  window.sessionId = data.sessionId;
              });
              
              $("#button1").click(function(event) {
                  event.preventDefault();
                var stripe = Stripe('pk_test_51IYbSIBuGjnVN6d33c3ZPzEAvycmV0ciFnnpHLQuQLTP0Mp1A5S2foZlypTv0y00St5DIrpCO98iLsaApykMYIy500I4E8haDc');
                stripe.redirectToCheckout({sessionId: window.sessionId})
                .then(function (result) {});
               });
              });
            </script>
    </head>
<body>
    <canvas id="renderCanvas"></canvas>
    <script>
    BABYLON.DefaultLoadingScreen.prototype.displayLoadingUI = function () {
    if (this._loadingDiv) {
        // Do not add a loading screen if there is already one
        return;
    }
    this._loadingDiv = document.createElement("div");
    this._loadingDiv.id = "babylonjsLoadingDiv";
    this._loadingDiv.style.opacity = "0";
    this._loadingDiv.style.transition = "opacity 1.5s ease";
    this._loadingDiv.style.pointerEvents = "none";
    
    // Loading text
    this._loadingTextDiv = document.createElement("div");
    this._loadingTextDiv.style.position = "absolute";
    //this._loadingTextDiv.style.left = "0";
    this._loadingTextDiv.style.top = "50%";
    //this._loadingTextDiv.style.marginTop = "80px";
    this._loadingTextDiv.style.width = "100%";
    this._loadingTextDiv.style.height = "20px";
    this._loadingTextDiv.style.fontFamily = "Montserrat";
    this._loadingTextDiv.style.fontSize = "40px";
    this._loadingTextDiv.style.fontWeight = "700";
    this._loadingTextDiv.style.color = "white";
    this._loadingTextDiv.style.textAlign = "center";
    this._loadingTextDiv.innerHTML = "We are currently loading your scene...";

    this._loadingTextDiv2 = document.createElement("div2");
    this._loadingTextDiv2.style.position = "absolute";
    this._loadingTextDiv2.style.left = "43%";
    this._loadingTextDiv2.style.top = "95%";
    //this._loadingTextDiv.style.marginTop = "80px";
    this._loadingTextDiv2.style.width = "100%";
    this._loadingTextDiv2.style.height = "10px";
    this._loadingTextDiv2.style.fontFamily = "Montserrat";
    this._loadingTextDiv2.style.fontSize = "15px";
    this._loadingTextDiv2.style.fontWeight = "700";
    this._loadingTextDiv2.style.color = "white";
    this._loadingTextDiv2.style.textAlign = "center";
    this._loadingTextDiv2.innerHTML = "Howard Google DSC";
    // Generating keyframes
    var style = document.createElement('style');
    style.type = 'text/css';
    var keyFrames = "@-webkit-keyframes spin1 { 0% { -webkit-transform: rotate(0deg);}\n                    100% { -webkit-transform: rotate(360deg);}\n                }                @keyframes spin1 {                    0% { transform: rotate(0deg);}\n                    100% { transform: rotate(360deg);}\n                }";
    style.innerHTML = keyFrames;
    document.getElementsByTagName('head')[0].appendChild(style);
    // Loading img
    var imgBack = new Image();
    imgBack.src = "/images/gif1.gif";
    imgBack.style.position = "absolute";
    imgBack.style.width = "100%";
    var myVideo = document.getElementById("myVideo");
    // imgBack.style.marginLeft = "-60px";
    // imgBack.style.marginTop = "-60px";
    
    this._loadingDiv.appendChild(imgBack);
    this._loadingDiv.appendChild(this._loadingTextDiv);
    this._loadingDiv.appendChild(this._loadingTextDiv2);
    this._resizeLoadingUI();
    window.addEventListener("resize", this._resizeLoadingUI);
    this._loadingDiv.style.backgroundColor = this._loadingDivBackgroundColor;
    document.body.appendChild(this._loadingDiv);
    this._loadingDiv.style.opacity = "1";
};
        var canvas = document.getElementById("renderCanvas");
        var engine = null;
        var scene = null;
        var sceneToRender = null;
        var createDefaultEngine = function() { return new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true }); };
        var createScene = function () {
    var scene = new BABYLON.Scene(engine, {useGeometryIdsMap: true, useClonedMeshhMap: true, useMaterialMeshMap: true});

    engine.displayLoadingUI();


   scene.clearColor = new BABYLON.Color3(0.6, 0.6, 0.8);
   //scene.ambientColor = new BABYLON.Color3(0.3, 0.3, 0.3);

   //scene.debugLayer.show({embedMode: true, handleResize: true, enableClose: true, enablePopup: true, overlay: true});

    var light = new BABYLON.HemisphericLight("Light1", new BABYLON.Vector3(0,0,0), scene);
    light.intensity = 5;

    var light2 = new BABYLON.HemisphericLight("Light2", new BABYLON.Vector3(0,5,0), scene);
    light2.intensity = 2;

    var light3 = new BABYLON.PointLight("Omni", new BABYLON.Vector3(20, 20, 100), scene);

    var light4 = new BABYLON.HemisphericLight("Light4", new BABYLON.Vector3(0,5,0), scene);
    light4.intensity = 1;

    //Add the camera, to be shown as a cone and surrounding collision volume
    var camera = new BABYLON.UniversalCamera("MyCamera", new BABYLON.Vector3(35, 5.116, -3), scene);
    camera.minZ = 0.01;
    camera.attachControl(canvas, true);
    camera.speed = 0.03;
    camera.angularSpeed = 0.04;
    camera.angle = Math.PI/2;
    camera.direction = new BABYLON.Vector3(Math.cos(camera.angle), 0, Math.sin(camera.angle));

    camera.rotation.y = Math.PI/2;

    var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");

    var galleryBuilding = BABYLON.SceneLoader.Append("https://cdn.glitch.com/70dbad3b-1f56-4b3f-96b7-05e0de0f2754%2Fnewgallery3.3.glb?v=1617167933931", "", scene, function (scene) {
        var root = scene.getNodeByName("__root__");
        root.name = "gallery";

        root.getChildMeshes().forEach(m => {
            m.checkCollisions = true;
        });

        var floor = scene.getMeshByName("floor");

        floor.material.roughness = 1;
        floor.material.metallic = 0.75;
        floor.material.emissiveColor = new BABYLON.Color3(0, 0, 0);
        floor.material.usePhysicalLightFalloff = false;

        const glass = new BABYLON.PBRMetallicRoughnessMaterial('glass', scene)
        glass.baseColor = new BABYLON.Color3(0.78, 0.82, 0.85)
        glass.emissiveColor = new BABYLON.Color3(0.2, 0.2, 0.2)
        glass.metallic = 1.0
        glass.roughness = 0.2
        glass.alpha = 0.2

        light.excludedMeshes.push();
        light2.excludedMeshes.push(floor);
        var glassDoor = scene.getMeshByName("GlassDoors");

        const black = new BABYLON.StandardMaterial('glass', scene)
        black.diffuseColor = new BABYLON.Color3(0, 0, 0);
        var doorLining = scene.getMeshByName("doorlining");
        doorLining.material = black;
        glassDoor.material = glass;
        light.excludedMeshes.push(glassDoor, doorLining);
        light3.excludedMeshes.push(doorLining);
        light2.excludedMeshes.push(glassDoor, doorLining);

    });

    BABYLON.SceneLoader.Append("https://cdn.glitch.com/70dbad3b-1f56-4b3f-96b7-05e0de0f2754%2FreginaGallerypack.glb?v=1617157544295", "", scene, function (scene) {
            var root = scene.getNodeByName('__root__');
            root.name = "people" + i;
            //root.parent = nullObj;
            var regina = scene.getNodeByName("Armature.001");
            regina.getChildMeshes().forEach(m => {
            //m.checkCollisions = true;
                m.alwaysSelectAsActiveMesh = true;
            });
        });
    BABYLON.SceneLoader.Append("https://cdn.glitch.com/70dbad3b-1f56-4b3f-96b7-05e0de0f2754%2FjamesGallerypack.glb?v=1617157686791", "", scene, function (scene) {
            var root = scene.getNodeByName('__root__');
            root.name = "people" + i;
            //root.parent = nullObj;
            var james = scene.getNodeByName("Armature");
            james.getChildMeshes().forEach(m => {
            //m.checkCollisions = true;
                m.alwaysSelectAsActiveMesh = true;
            });
        });

    var fashionBuilding = BABYLON.SceneLoader.Append("https://cdn.glitch.com/70dbad3b-1f56-4b3f-96b7-05e0de0f2754%2Ffashionstore4.2.glb?v=1617167926265", "", scene, function (scene) {
            var root = scene.getNodeByName("__root__");
            root.name = "fashion";

            //var light2 = new BABYLON.PointLight("Light", new BABYLON.Vector3(0,35,0), scene);
            //light2.intensity = 15;
            var beloved = scene.getMeshByName("Curve.016");

            root.getChildMeshes().forEach(l => {
                if (l != beloved) {
                    light.excludedMeshes.push(l);
                    light2.includedOnlyMeshes.push(l);
                }
            });


            root.position = new BABYLON.Vector3(200,1,0);
            root.rotation = new BABYLON.Vector3(0,-1.571,0);

            var glassdoor1 = scene.getMeshByName("Glass");
            var glassdoor2 = scene.getMeshByName("Glass.002");
            var windows = scene.getMeshByName("Plane.002");

            var exteriorFashion = scene.getMeshByName("Cube.001");
            exteriorFashion.material.backFaceCulling = true;

            var exteriorFashion2 = scene.getMeshByName("Cube.005");
            //exteriorFashion.flipFaces = true;
            exteriorFashion.material.backFaceCulling = true;
            //var exteriorFashion2 = exteriorFashion.clone("buildingColor");
            //exteriorFashion2.position.z = -1;

            var exteriorMat = new BABYLON.StandardMaterial("exteriorMat", scene);
            exteriorMat.diffuseColor = new BABYLON.Color3(0,0,0);
            exteriorMat.backFaceCulling = false;
            exteriorMat.emissiveColor = new BABYLON.Color3(0,0,0);
            //exteriorFashion2.scaling = new BABYLON.Vector3(59, -14.5, 58.5);



            const glass = new BABYLON.PBRMetallicRoughnessMaterial('glass', scene)
            glass.baseColor = new BABYLON.Color3(0.78, 0.82, 0.85)
            glass.emissiveColor = new BABYLON.Color3(0.2, 0.2, 0.4)
            glass.metallic = 1.0
            glass.roughness = 0.2
            glass.alpha = 0.2

            glassdoor1.material = glass;
            glassdoor2.material = glass;
            windows.material = glass;

            var hatbox = scene.getMeshByName("hatBox");
            hatbox.material = glass;

            var hatbox2 = scene.getMeshByName("hatBox2");
            hatbox2.material = glass;

            var walls = scene.getMeshByName("Cube.001");
            walls.material.emissiveColor = new BABYLON.Vector3(.3, 0.3, 0.3);

            var planeOpts = {
                height: 7, 
                width: 10, 
                sideOrientation: BABYLON.Mesh.DOUBLESIDE
            };
            var videoPlane = BABYLON.MeshBuilder.CreatePlane("plane", planeOpts, scene);
            var vidPos = (new BABYLON.Vector3(254, 19.5, -1.8));
            videoPlane.position = vidPos;
            var videoMat = new BABYLON.StandardMaterial("m", scene);
            var videoTexture = new BABYLON.VideoTexture("vidtex","https://cdn.glitch.com/70dbad3b-1f56-4b3f-96b7-05e0de0f2754%2Fb__dove.mp4?v=1617169848395", scene);
            videoMat.diffuseTexture = videoTexture;
            videoMat.roughness = 1;
            videoMat.emissiveColor = new BABYLON.Color3.White();
            videoPlane.material = videoMat;
            videoPlane.scaling = new BABYLON.Vector3(1.342, 1.138, 1.0);
            videoPlane.rotation = new BABYLON.Vector3(0, 1.571, 0);
            scene.onPointerObservable.add(function(evt){
			if(evt.pickInfo.pickedMesh === videoPlane){
                        //console.log("picked");
                            if(videoTexture.video.paused)
                                videoTexture.video.play();
                            else
                                videoTexture.video.pause();
                            console.log(videoTexture.video.paused?"paused":"playing");
                    }
            }, BABYLON.PointerEventTypes.POINTERPICK);

            light2.excludedMeshes.push(videoPlane);
            light.excludedMeshes.push(videoPlane);
            light3.excludedMeshes.push(videoPlane);

            var statue = scene.getMeshByName("statueBlock");
            statue.name = "statue";

            var floorMat = scene.getMaterialByName("Material.002");

            var hatStand1 = scene.getMeshByName("hatStand1");
            var hatStand2 = scene.getMeshByName("hatStand2");
            var cloRack1 = scene.getMeshByName("CloRack1");
            var cloRack2 = scene.getMeshByName("CloRack2");
            var tvBack = scene.getMeshByName("TV-Back");
            var dove = scene.getMeshByName("Dove");

            floorMat.reflectionTexture = new BABYLON.MirrorTexture("mirror", {ratio: 0.5}, scene, true);
            floorMat.reflectionTexture.mirrorPlane = new BABYLON.Plane(0, -2.0, 0, -2.0);
            //floorMat.reflectionTexture.renderList = [statue, hatStand1, hatStand2, cloRack1, cloRack2];
            floorMat.reflectionTexture.level = 1.0;
            floorMat.reflectionTexture.adaptiveBlurKernel = 50;
            floorMat.emissiveColor = new BABYLON.Color3(0.05, 0.05, 0.05);

            var glowParent = new BABYLON.TransformNode("master");

            var purple1 = scene.getMeshByName("Purple1");
            var purple2 = scene.getMeshByName("Purple.001");
            var purple3 = scene.getMeshByName("Purple2");
            var purple4 = scene.getMeshByName("Purple2.001");
            var purple5 = scene.getMeshByName("Purple3");
            var purple6 = scene.getMeshByName("Purple3.001");
            var purple7 = scene.getMeshByName("Purple4");
            var purple8 = scene.getMeshByName("Purple4.001");


            var gl = new BABYLON.GlowLayer("glow", scene);
            gl.intensity = 0.7;
            gl.addExcludedMesh(videoPlane);
            gl.addExcludedMesh(hatbox);
            gl.addExcludedMesh(hatbox2);

            var glowMat = scene.getMaterialByName("Material");
            var whiteGlow = new BABYLON.Color3(.7, .7, .7);
            var purpleGlow = new BABYLON.Color3(.28, .25, .35);
            glowMat.emissiveColor = whiteGlow;

            var glowAnim = new BABYLON.Animation("glowAnim", "material.emissiveColor", 30, BABYLON.Animation.ANIMATIONTYPE_COLOR3, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);

            const glowkeyFrames = []; 

            glowkeyFrames.push({
                frame: 0,
                value: whiteGlow
            });

            glowkeyFrames.push({
                frame: 100,
                value: whiteGlow
            });

            glowkeyFrames.push({
                frame: 200,
                value: purpleGlow
            });
            glowkeyFrames.push({
                frame: 400,
                value: purpleGlow
            });
            glowkeyFrames.push({
                frame: 500,
                value: whiteGlow
            });

            glowAnim.setKeys(glowkeyFrames);
            purple1.animations.push(glowAnim);

            scene.beginAnimation(purple1, 0, 500, true);
            //light2.excludedMeshes.push(boxCloud);


            //mirror.position = new BABYLON.Vector3(0, 1, 0);

            //light.excludedMeshes.push(cloRack2, cloRack1, statue, dove);
            //light2.includedOnlyMeshes.push(cloRack2, cloRack1, statue, dove);

            // Shadow
            //shadowGenerator = new BABYLON.ShadowGenerator(1024, light);
            //shadowGenerator.getShadowMap().renderList.push(statue);
            //shadowGenerator.setDarkness(0.5);
            //shadowGenerator.usePoissonSampling = true;
            //shadowGenerator.bias = 0;
            //statue.receiveShadows = true;

            var shirt1 = scene.getMeshByName("Shirt1");
            var shirt2 = scene.getMeshByName("Shirt2");

            var shirt4 = scene.getMeshByName("Shirt4");

            var shirt5 = scene.getMeshByName("Shirt5");

            var shirt6 = scene.getMeshByName("Shirt6");

            var belovedSign = scene.getMeshByName("Curve.016");
            belovedSign.material.emissiveColor = new BABYLON.Color3(1,1,1);

            
        

            //light.excludedMeshes.push(cloRack2, cloRack1, statue, dove, shirt1, shirt2, shirt3, shirt4, shirt5, shirt6);
            //light2.includedOnlyMeshes.push(cloRack2, cloRack1, statue, dove, shirt1, shirt2, shirt3, shirt4, shirt5, shirt6);
            //floorMat.reflectionTexture.renderList = [statue, hatStand1, hatStand2, cloRack1, cloRack2, shirt1, shirt2, shirt3, shirt4, shirt5, shirt6];
        });

    //clouds
    var boxCloud = BABYLON.Mesh.CreateSphere("boxCloud", 1000, 1000, scene);
    boxCloud.position = new BABYLON.Vector3(0, 0, 12);
    var cloudMaterial = new BABYLON.StandardMaterial("cloudMat", scene);
    var cloudProcText = new BABYLON.CloudProceduralTexture("cloud", 1024, scene);
    cloudMaterial.emissiveTexture = cloudProcText;
    cloudMaterial.backFaceCulling = false;
    cloudMaterial.emissiveTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;
    boxCloud.material = cloudMaterial;
    light.excludedMeshes.push(boxCloud);
    light2.excludedMeshes.push(boxCloud);
    boxCloud.rotation.x = 120;

        //create art canvases

        //create uv array to add texture to only one face
        var faceUV = new Array(6);

        var mat = new BABYLON.StandardMaterial("mat", scene);
        mat.diffuseColor = new BABYLON.Color3(.9,.9,.9);
        var texture = new BABYLON.Texture("/images/Afro_Wave.jpg", scene);
        mat.diffuseTexture = texture;

        //set each uv face to blank
        for (var i = 0; i < 6; i++) {
            faceUV[i] = new BABYLON.Vector4(0, 0, 0, 0);
        }

        var options = {
            width: 10,
            height: 0.2,
            depth: 8,
            faceUV: faceUV
        };

        //make face 4 equal to our artwork texture
        faceUV[4] = new BABYLON.Vector4(0,0,1,1);
        var canvas = BABYLON.MeshBuilder.CreateBox('canvas', options, scene);
        canvas.material = mat;
        canvas.rotation = new BABYLON.Vector3(0, -1.571, -1.571);
        canvas.position = new BABYLON.Vector3(17.5, 10, -43);
        light.excludedMeshes.push(canvas);

        var faceUVDesc1 = new Array(6);

        var desc1Mat = new BABYLON.StandardMaterial("mat", scene);
        desc1Mat.diffuseColor = new BABYLON.Color3(.9,.9,.9);
        var descTexture = new BABYLON.Texture("/images/ArtLabels-17.jpg", scene);  
        desc1Mat.diffuseTexture = descTexture;
        desc1Mat.diffuseTexture.hasAlpha = true;

        //set each uv face to blank
        for (var i = 0; i < 6; i++) {
            faceUVDesc1[i] = new BABYLON.Vector4(0, 0, 0, 0);
        }

        var options = {
            width: 1.5,
            height: 0.1,
            depth: 2,
            faceUV: faceUVDesc1
        };

        //make face 4 equal to our artwork texture
        faceUVDesc1[4] = new BABYLON.Vector4(0,0,1,1);
        var desc1 = BABYLON.MeshBuilder.CreateBox('canvas', options, scene);
        desc1.material = desc1Mat;
        desc1.rotation = new BABYLON.Vector3(0, -1.571, -1.571);
        desc1.position = new BABYLON.Vector3(10, 8, -43);
        //light.excludedMeshes.push(desc1);



    var faceUV2 = new Array(6);

    var mat2 = new BABYLON.StandardMaterial("mat", scene);
    mat2.diffuseColor = new BABYLON.Color3(1, 1, 1);
    var texture2 = new BABYLON.Texture("/images/They_will_call_You_Villain.jpg", scene);
    mat2.diffuseTexture = texture2;

    //set each uv face to blank
    for (var i = 0; i < 6; i++) {
        faceUV2[i] = new BABYLON.Vector4(0, 0, 0, 0);
    }

    var options = {
        width: 10,
        height: 0.2,
        depth: 8,
        faceUV: faceUV2
    };

    //make face 4 equal to our artwork texture
    faceUV2[4] = new BABYLON.Vector4(0,0,1,1);
    var canvas2 = BABYLON.MeshBuilder.CreateBox('canvas2', options, scene);
    canvas2.material = mat2;
    canvas2.rotation = new BABYLON.Vector3(0, -1.571, -1.571);
    canvas2.position = new BABYLON.Vector3(-30, 10, -43.1);
    light.excludedMeshes.push(canvas2);

    var faceUVDesc2 = new Array(6);

        var desc2Mat = new BABYLON.StandardMaterial("mat", scene);
        desc2Mat.diffuseColor = new BABYLON.Color3(.9,.9,.9);
        var desc2Texture = new BABYLON.Texture("/images/ArtLabels-18.jpg", scene);  
        desc2Mat.diffuseTexture = desc2Texture;

        //set each uv face to blank
        for (var i = 0; i < 6; i++) {
            faceUVDesc2[i] = new BABYLON.Vector4(0, 0, 0, 0);
        }

        var options = {
            width: 1.5,
            height: 0.1,
            depth: 2,
            faceUV: faceUVDesc2
        };

        //make face 4 equal to our artwork texture
        faceUVDesc2[4] = new BABYLON.Vector4(0,0,1,1);
        var desc2 = BABYLON.MeshBuilder.CreateBox('canvas', options, scene);
        desc2.material = desc2Mat;
        desc2.rotation = new BABYLON.Vector3(0, -1.571, -1.571)
        desc2.position = new BABYLON.Vector3(-37, 8, -43.1);
        //light.excludedMeshes.push(desc1);

    //click to toggle swipe div

    var faceUV3 = new Array(6);

    var mat3 = new BABYLON.StandardMaterial("mat", scene);
    mat3.diffuseColor = new BABYLON.Color3(1, 1, 1);
    var art3 = new BABYLON.Texture("/images/Untitled_Artwork.jpg", scene);
    mat3.diffuseTexture = art3;
    mat3.diffuseTexture.hasAlpha = true;

    //set each uv face to blank
    for (var i = 0; i < 6; i++) {
        faceUV3[i] = new BABYLON.Vector4(0, 0, 0, 0);
    }

    var options = {
        width: 10,
        height: 0.2,
        depth: 8,
        faceUV: faceUV3
    };

    //make face 4 equal to our artwork texture
    faceUV3[4] = new BABYLON.Vector4(0,0,1,1);
    var canvas3 = BABYLON.MeshBuilder.CreateBox('canvas3', options, scene);
    canvas3.material = mat3;
    canvas3.rotation = new BABYLON.Vector3(0, -.01, -1.571);
    canvas3.position = new BABYLON.Vector3(-47.8, 10, -2.3);
    light.excludedMeshes.push(canvas3);

    var faceUVDesc3 = new Array(6);

        var desc3Mat = new BABYLON.StandardMaterial("desc3", scene);
        desc3Mat.diffuseColor = new BABYLON.Color3(.9,.9,.9);
        var desc3Texture = new BABYLON.Texture("/images/ArtLabels-19.jpg", scene);  
        desc3Mat.diffuseTexture = desc3Texture;
        desc3Mat.diffuseTexture.hasAlpha = true;

        //set each uv face to blank
        for (var i = 0; i < 6; i++) {
            faceUVDesc3[i] = new BABYLON.Vector4(0, 0, 0, 0);
        }

        var options = {
            width: 1.5,
            height: 0.1,
            depth: 2,
            faceUV: faceUVDesc3
        };

        //make face 4 equal to our artwork texture
        faceUVDesc3[4] = new BABYLON.Vector4(0,0,1,1);
        var desc3 = BABYLON.MeshBuilder.CreateBox('desc3', options, scene);
        desc3.material = desc3Mat;
        desc3.rotation = new BABYLON.Vector3(0, -.01, -1.571);
        desc3.position = new BABYLON.Vector3(-47.8, 8, 4.2);
    


    //click to toggle swipe div


    var faceUV4 = new Array(6);

    var mat4 = new BABYLON.StandardMaterial("mat", scene);
    mat4.diffuseColor = new BABYLON.Color3(1, 1, 1);
    var art4 = new BABYLON.Texture("/images/rootsGuideTheCompass.JPG", scene);
    mat4.diffuseTexture = art4;
    mat4.diffuseTexture.hasAlpha = true;

    //set each uv face to blank
    for (var i = 0; i < 6; i++) {
        faceUV4[i] = new BABYLON.Vector4(0, 0, 0, 0);
    }

    var options = {
        width: 10,
        height: 0.2,
        depth: 8,
        faceUV: faceUV4
    };


    //make face 4 equal to our artwork texture
    faceUV4[5] = new BABYLON.Vector4(0,0,1,1);
    var canvas4 = BABYLON.MeshBuilder.CreateBox('canvas4', options, scene);
    canvas4.material = mat4;
    canvas4.rotation = new BABYLON.Vector3(-3.13, -1.571, -1.571);
    canvas4.position = new BABYLON.Vector3(-31.5, 10, 38.17);
    light.excludedMeshes.push(canvas4);

    var faceUVDesc4 = new Array(6);

        var desc4Mat = new BABYLON.StandardMaterial("desc4", scene);
        desc4Mat.diffuseColor = new BABYLON.Color3(.9,.9,.9);
        var desc4Texture = new BABYLON.Texture("/images/ArtLabels-20.jpg", scene);  
        desc4Mat.diffuseTexture = desc4Texture;

        //set each uv face to blank
        for (var i = 0; i < 6; i++) {
            faceUVDesc4[i] = new BABYLON.Vector4(0, 0, 0, 0);
        }

        var options = {
            width: 1.5,
            height: 0.1,
            depth: 2,
            faceUV: faceUVDesc4
        };

        //make face 4 equal to our artwork texture
        faceUVDesc4[5] = new BABYLON.Vector4(0,0,1,1);
        var desc4 = BABYLON.MeshBuilder.CreateBox('desc4', options, scene);
        desc4.material = desc4Mat;
        desc4.rotation = new BABYLON.Vector3(-3.13, -1.571, -1.571);
        desc4.position = new BABYLON.Vector3(-24, 8, 38.17);


    var faceUV5 = new Array(6);

    var mat5 = new BABYLON.StandardMaterial("mat", scene);
    mat5.diffuseColor = new BABYLON.Color3(1, 1, 1);
    var art5 = new BABYLON.Texture("/images/paperBonesI.JPG", scene);
    mat5.diffuseTexture = art5;
    mat5.diffuseTexture.hasAlpha = true;

    //set each uv face to blank
    for (var i = 0; i < 6; i++) {
        faceUV5[i] = new BABYLON.Vector4(0, 0, 0, 0);
    }

    var options = {
        width: 10,
        height: 0.2,
        depth: 8,
        faceUV: faceUV5
    };

    //make face 4 equal to our artwork texture
    faceUV5[5] = new BABYLON.Vector4(0,0,1,1);
    var canvas5 = BABYLON.MeshBuilder.CreateBox('canvas5', options, scene);
    canvas5.material = mat5;
    canvas5.rotation = new BABYLON.Vector3(-3.13, -1.571, -1.571);
    canvas5.position = new BABYLON.Vector3(17.41, 10, 38.27);
    light.excludedMeshes.push(canvas5);

    var faceUVDesc5 = new Array(6);

        var desc5Mat = new BABYLON.StandardMaterial("desc5", scene);
        desc5Mat.diffuseColor = new BABYLON.Color3(.9,.9,.9);
        var desc5Texture = new BABYLON.Texture("/images/ArtLabels-21.jpg", scene);  
        desc5Mat.diffuseTexture = desc5Texture;

        //set each uv face to blank
        for (var i = 0; i < 6; i++) {
            faceUVDesc5[i] = new BABYLON.Vector4(0, 0, 0, 0);
        }

        var options = {
            width: 1.5,
            height: 0.1,
            depth: 2,
            faceUV: faceUVDesc5
        };

        //make face 4 equal to our artwork texture
        faceUVDesc5[5] = new BABYLON.Vector4(0,0,1,1);
        var desc5 = BABYLON.MeshBuilder.CreateBox('desc5', options, scene);
        desc5.material = desc5Mat;
        desc5.rotation = new BABYLON.Vector3(-3.13, -1.571, -1.571);
        desc5.position = new BABYLON.Vector3(24, 8, 38.27);


    var faceUV6 = new Array(6);

    var mat6 = new BABYLON.StandardMaterial("mat", scene);
    mat6.diffuseColor = new BABYLON.Color3(.9,.9,.9);
    var texture6 = new BABYLON.Texture("/images/tears_for_negroes.jpg", scene);
    mat6.diffuseTexture = texture6;

    //set each uv face to blank
    for (var i = 0; i < 6; i++) {
        faceUV6[i] = new BABYLON.Vector4(0, 0, 0, 0);
    }

    var options = {
        width: 10,
        height: 0.2,
        depth: 8,
        faceUV: faceUV6
    };

    //make face 4 equal to our artwork texture
    faceUV6[4] = new BABYLON.Vector4(0,0,1,1);
    var canvas6 = BABYLON.MeshBuilder.CreateBox('canvas6', options, scene);
    canvas6.material = mat6;
    canvas6.rotation = new BABYLON.Vector3(3.16, -1.571, 1.571);
    canvas6.position = new BABYLON.Vector3(17.5, 10, -45.1);
    light.excludedMeshes.push(canvas6);

    var faceUVDesc6 = new Array(6);

    var desc6Mat = new BABYLON.StandardMaterial("desc6", scene);
        desc6Mat.diffuseColor = new BABYLON.Color3(.9,.9,.9);
        var desc6Texture = new BABYLON.Texture("/images/ArtLabels-22.jpg", scene);  
        desc6Mat.diffuseTexture = desc6Texture;

        //set each uv face to blank
        for (var i = 0; i < 6; i++) {
            faceUVDesc6[i] = new BABYLON.Vector4(0, 0, 0, 0);
        }

        var options = {
            width: 1.5,
            height: 0.1,
            depth: 2,
            faceUV: faceUVDesc6
        };

        //make face 4 equal to our artwork texture
        faceUVDesc6[4] = new BABYLON.Vector4(0,0,1,1);
        var desc6 = BABYLON.MeshBuilder.CreateBox('desc6', options, scene);
        desc6.material = desc6Mat;
        desc6.rotation = new BABYLON.Vector3(3.16, -1.571, 1.571);
        desc6.position = new BABYLON.Vector3(24, 8, -45.1);

var faceUV7 = new Array(6);

    var mat7 = new BABYLON.StandardMaterial("mat", scene);
    mat7.diffuseColor = new BABYLON.Color3(1, 1, 1);
    var texture7 = new BABYLON.Texture("/images/nightcrawler.JPG", scene);
    mat7.diffuseTexture = texture7;
    //mat7.diffuseTexture.hasAlpha = true;

    //set each uv face to blank
    for (var i = 0; i < 6; i++) {
        faceUV7[i] = new BABYLON.Vector4(0, 0, 0, 0);
    }

    var options = {
        width: 10,
        height: 0.2,
        depth: 8,
        faceUV: faceUV7
    };

    //make face 4 equal to our artwork texture
    faceUV7[5] = new BABYLON.Vector4(0,0,1,1);
    var canvas7 = BABYLON.MeshBuilder.CreateBox('canvas7', options, scene);
    canvas7.material = mat7;
    canvas7.rotation = new BABYLON.Vector3(3.16, -1.571, -1.571);
    canvas7.position = new BABYLON.Vector3(-29, 10, -45.115);
    light.excludedMeshes.push(canvas7);


var faceUVDesc7 = new Array(6);

var desc7Mat = new BABYLON.StandardMaterial("desc7", scene);
    desc7Mat.diffuseColor = new BABYLON.Color3(.9,.9,.9);
    var desc7Texture = new BABYLON.Texture("/images/ArtLabels-23.jpg", scene);  
    desc7Mat.diffuseTexture = desc7Texture;

    //set each uv face to blank
    for (var i = 0; i < 6; i++) {
        faceUVDesc7[i] = new BABYLON.Vector4(0, 0, 0, 0);
    }

    var options = {
        width: 1.5,
        height: 0.1,
        depth: 2,
        faceUV: faceUVDesc7
    };

    //make face 4 equal to our artwork texture
    faceUVDesc7[5] = new BABYLON.Vector4(0,0,1,1);
    var desc7 = BABYLON.MeshBuilder.CreateBox('desc6', options, scene);
    desc7.material = desc7Mat;
    desc7.rotation = new BABYLON.Vector3(3.16, -1.571, -1.571);
    desc7.position = new BABYLON.Vector3(-22, 8, -45.115);





    var faceUV8 = new Array(6);

    var mat8 = new BABYLON.StandardMaterial("mat", scene);
    mat8.diffuseColor = new BABYLON.Color3(1, 1, 1);
    var art8 = new BABYLON.Texture("/images/before_heaven.JPG", scene);
    mat8.diffuseTexture = art8;
    //mat8.diffuseTexture.hasAlpha = true;

    //set each uv face to blank
    for (var i = 0; i < 6; i++) {
        faceUV8[i] = new BABYLON.Vector4(0, 0, 0, 0);
    }

    var options = {
        width: 10,
        height: 0.2,
        depth: 8,
        faceUV: faceUV8
    };

    //make face 4 equal to our artwork texture
    faceUV8[4] = new BABYLON.Vector4(0,0,1,1);
    var canvas8 = BABYLON.MeshBuilder.CreateBox('canvas8', options, scene);
    canvas8.material = mat8;
    canvas8.rotation = new BABYLON.Vector3(0, -1.571, -1.571);
    canvas8.position = new BABYLON.Vector3(17.41, 10, 40.27);
    light.excludedMeshes.push(canvas8);

    var faceUVDesc8 = new Array(6);

    var desc8Mat = new BABYLON.StandardMaterial("desc8", scene);
        desc8Mat.diffuseColor = new BABYLON.Color3(.9,.9,.9);
        var desc8Texture = new BABYLON.Texture("/images/ArtLabels-24.jpg", scene);  
        desc8Mat.diffuseTexture = desc8Texture;

        //set each uv face to blank
        for (var i = 0; i < 6; i++) {
            faceUVDesc8[i] = new BABYLON.Vector4(0, 0, 0, 0);
        }

        var options = {
            width: 1.5,
            height: 0.1,
            depth: 2,
            faceUV: faceUVDesc8
        };

        //make face 4 equal to our artwork texture
        faceUVDesc8[4] = new BABYLON.Vector4(0,0,1,1);
        var desc8 = BABYLON.MeshBuilder.CreateBox('desc8', options, scene);
        desc8.material = desc8Mat;
        desc8.rotation = new BABYLON.Vector3(0, -1.571, -1.571);
        desc8.position = new BABYLON.Vector3(11, 8, 40.27);
    
    

    var faceUV9 = new Array(6);

    var mat9 = new BABYLON.StandardMaterial("mat", scene);
    mat9.diffuseColor = new BABYLON.Color3(1, 1, 1);
    var art9 = new BABYLON.Texture("/images/gangster_blues.JPG", scene);
    mat9.diffuseTexture = art9;
    //mat9.diffuseTexture.hasAlpha = true;

    //set each uv face to blank
    for (var i = 0; i < 6; i++) {
        faceUV9[i] = new BABYLON.Vector4(0, 0, 0, 0);
    }

    var options = {
        width: 10,
        height: 0.2,
        depth: 8,
        faceUV: faceUV9
    };

    //make face 4 equal to our artwork texture
    faceUV9[4] = new BABYLON.Vector4(0,0,1,1);
    var canvas9 = BABYLON.MeshBuilder.CreateBox('canvas9', options, scene);
    canvas9.material = mat9;
    canvas9.rotation = new BABYLON.Vector3(0, -1.58, -1.58);
    canvas9.position = new BABYLON.Vector3(-32, 10, 40.27);
    light.excludedMeshes.push(canvas8, canvas9);

    var faceUVDesc9 = new Array(6);

    var desc9Mat = new BABYLON.StandardMaterial("desc9", scene);
        desc9Mat.diffuseColor = new BABYLON.Color3(.9,.9,.9);
        var desc9Texture = new BABYLON.Texture("/images/ArtLabels-25.jpg", scene);  
        desc9Mat.diffuseTexture = desc9Texture;

        //set each uv face to blank
        for (var i = 0; i < 6; i++) {
            faceUVDesc9[i] = new BABYLON.Vector4(0, 0, 0, 0);
        }

        var options = {
            width: 1.5,
            height: 0.1,
            depth: 2,
            faceUV: faceUVDesc9
        };

        //make face 4 equal to our artwork texture
        faceUVDesc9[4] = new BABYLON.Vector4(0,0,1,1);
        var desc9 = BABYLON.MeshBuilder.CreateBox('desc9', options, scene);
        desc9.material = desc8Mat;
        desc9.rotation = new BABYLON.Vector3(0, -1.58, -1.58);
        desc9.position = new BABYLON.Vector3(-38.5, 8, 40.27);
        

    var light5 = new BABYLON.HemisphericLight("Light5", new BABYLON.Vector3(0,15,0), scene);
    light5.intensity = 5;
    light5.includedOnlyMeshes.push( desc6, desc7, desc8, desc9, canvas6, canvas7, canvas8, canvas9);

    






    light.excludedMeshes.push(desc1, desc2, desc3, desc4, desc5);
    light2.excludedMeshes.push(canvas2);
    light4.includedOnlyMeshes.push(desc1, desc2, desc3, desc4, desc5, canvas2, canvas3, canvas, canvas4, canvas5);
    //light4.includedOnlyMeshes.push(canvas);	




    
    camera.rotation.y += Math.PI;


    //Dummy camera as cone

    /* Set Up Scenery
    _____________________*/

    //Ground
    var ground = BABYLON.MeshBuilder.CreateGround("ground", {width: 1000, height: 1000}, scene);
    ground.material = new BABYLON.StandardMaterial("groundMat", scene);
    ground.material.diffuseColor = new BABYLON.Color3(1, 1, 1);
    ground.material.backFaceCulling = false;

    light2.excludedMeshes.push(ground);
    light.excludedMeshes.push(ground);

    var lowerGround = ground.clone("lowerGround");
    lowerGround.scaling.x = 4;
    lowerGround.scaling.z = 4;
    lowerGround.position.y = -16;
    lowerGround.material = ground.material.clone("lowerMat");
    lowerGround.material.diffuseColor = new BABYLON.Color3(0, 1, 0);
    

    /* End Create Scenery */

    //Gravity and Collisions Enabled
    scene.gravity = new BABYLON.Vector3(0, -0.9, 0);
    scene.collisionsEnabled = true;

    camera.checkCollisions = true;
    camera.applyGravity = true;

    ground.checkCollisions = true;
    lowerGround.checkCollisions = true;

    camera.ellipsoid = new BABYLON.Vector3(0.5, 3, 0.5);
    camera.ellipsoidOffset = new BABYLON.Vector3(0, 1, 0);

    var exitDialog = new BABYLON.GUI.Image("Enter", "/images/ToExit.png");
        exitDialog.width = "330px";
        exitDialog.height = "98px";
        exitDialog.isVisible = false;
        exitDialog.top = "380px";
        advancedTexture.addControl(exitDialog);

        var viewDialog = new BABYLON.GUI.Image("Enter", "/images/ToView.png");
        viewDialog.width = "330px";
        viewDialog.height = "98px";
        viewDialog.isVisible = false;
        viewDialog.top = "380px";
        advancedTexture.addControl(viewDialog);

    // Create the "God Rays" effect (volumetric light scattering)
	//var godrays = new BABYLON.VolumetricLightScatteringPostProcess('godrays', 1.0, camera, null, 1, BABYLON.Texture.BILINEAR_SAMPLINGMODE, scene, false);


    //godrays.samples = 2;
    // By default it uses a billboard to render the sun, just apply the desired texture
    // position and scale
    //godrays.mesh.material.diffuseTexture = new BABYLON.Texture('images/sun.png', scene, true, false, BABYLON.Texture.BILINEAR_SAMPLINGMODE);
    //godrays.mesh.material.diffuseTexture.hasAlpha = true;
    //godrays.mesh.position = new BABYLON.Vector3(0, 100, 0);
    //godrays.mesh.scaling = new BABYLON.Vector3(50, 50, 50);

    light3.position = new BABYLON.Vector3(0, 100, 0);
    light3.excludedMeshes.push(boxCloud);




    //Create Visible Ellipsoid around camera

    // GUI
    var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");
        
    var button = BABYLON.GUI.Button.CreateImageOnlyButton("but", "/images/i-icon-w.png");
        button.width = "35px";
        button.height = "35px";
        button.color = "transparent";
        button.image.detectPointerOnOpaqueOnly = true;
        button.children[0].detectPointerOnOpaqueOnly = true;
        button.top = "-430px";
        button.left = "48%px";

        advancedTexture.addControl(button);

        var homebutton = BABYLON.GUI.Button.CreateImageOnlyButton("homebut", "/images/home.png");
        homebutton.width = "35px";
        homebutton.height = "35px";
        homebutton.color = "transparent";
        homebutton.image.detectPointerOnOpaqueOnly = true;
        homebutton.children[0].detectPointerOnOpaqueOnly = true;
        homebutton.top = "-430px"
        homebutton.left = "45%"
        //homebutton.background = "rgba(0.5, 0.5, 0.5, 0.6)";
        //homebutton.alpha = 0;
        advancedTexture.addControl(homebutton);
        homebutton.onPointerDownObservable.add(function() {
            window.location.href = "/index.html";
        });


        var controls = BABYLON.GUI.Button.CreateImageOnlyButton("homebut", "/images/controls-new2.png");
        controls.width = "1000px";
        controls.height = "585px";

        advancedTexture.addControl(controls);

        controls.isVisible = false;

        var showGUI = false;

        controls.onPointerDownObservable.add(function() {
            controls.isVisible = false;
            showGUI = false;
        });

        button.onPointerDownObservable.add(function() {
            if(!showGUI){
                controls.isVisible = true;
                showGUI = true;
            } else if(showGUI) {
                showGUI = false;
                controls.isVisible = false;
            }
    });


    var faceUV = new Array(6);

        var exitMat = new BABYLON.StandardMaterial("exitMat", scene);
        exitMat.diffuseColor = new BABYLON.Color3(.9,.9,.9);
        var exitTexture = new BABYLON.Texture("/images/exitSign-12.jpg", scene);
        exitMat.diffuseTexture = exitTexture;

        //set each uv face to blank
        for (var i = 0; i < 6; i++) {
            faceUV[i] = new BABYLON.Vector4(0, 0, 0, 0);
        }

        var options = {
            width: 1.3,
            height: 0.1,
            depth: 1.3,
            faceUV: faceUV
        };

        //make face 4 equal to our artwork texture
        faceUV[4] = new BABYLON.Vector4(0,0,1,1);
        var exit = BABYLON.MeshBuilder.CreateBox('canvas', options, scene);
        exit.material = exitMat;
        exit.position = new BABYLON.Vector3(45.8, 5, -2.5);
        exit.rotation = new BABYLON.Vector3(0, 3.1416, 4.71238);
        light.excludedMeshes.push(exit);
        light2.includedOnlyMeshes.push(exit);

        //click to toggle swipe div
        var actionManager = new BABYLON.ActionManager(scene);
        exit.actionManager = actionManager;

        var hl = new BABYLON.HighlightLayer("hl1", scene);

        actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger, function(ev){
                hl.addMesh(exit, BABYLON.Color3.White());
              }));
              //if hover is over remove highlight of the mesh
        actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger, function(ev){
                hl.removeMesh(exit);
              }));

        actionManager.registerAction(
            new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger, 
            function(event){
                var pickedMesh = event.meshUnderPointer; 

                window.location.href = "/videoFashion.html";
            })
        )


        var faceUVJoe = new Array(6);

        var artByJoeMat = new BABYLON.StandardMaterial("about", scene);
        artByJoeMat.diffuseColor = new BABYLON.Color3(.9,.9,.9);
        var artByJoeTexture = new BABYLON.Texture("/images/artByJoe2-10.jpg", scene);
        artByJoeMat.diffuseTexture = artByJoeTexture;

        //set each uv face to blank
        for (var i = 0; i < 6; i++) {
            faceUV[i] = new BABYLON.Vector4(0, 0, 0, 0);
        }

        var options = {
            width: 7,
            height: 0.1,
            depth: 7,
            faceUV: faceUVJoe
        };

        //make face 4 equal to our artwork texture
        faceUVJoe[4] = new BABYLON.Vector4(0,0,1,1);
        var artByJoe = BABYLON.MeshBuilder.CreateBox('canvas', options, scene);
        artByJoe.material = artByJoeMat;
        artByJoe.position = new BABYLON.Vector3(48.6, 10, -27);
        artByJoe.rotation = new BABYLON.Vector3(0, 3.1416, 4.71238);
        light.excludedMeshes.push(artByJoe);
        light2.includedOnlyMeshes.push(artByJoe);

        hl.addMesh(artByJoe, new BABYLON.Color3(.6, .8, 1));


    //Optimization
    BABYLON.SceneOptimizer.OptimizeAsync(scene, BABYLON.SceneOptimizerOptions.HighDegradationAllowed(),
    function() {
    // On success
    }, function() {
    // FPS target not reached
    });
    scene.blockfreeActiveMeshesAndRenderingGroups = true;
    scene.blockMaterialDirtyMechanism = true;

    /* New Input Management for Camera
    __________________________________*/

    //First remove the default management.
    camera.inputs.removeByType("FreeCameraKeyboardMoveInput");
    camera.inputs.removeByType("FreeCameraMouseInput");

    //Key Input Manager To Use Keys to Move Forward and BackWard and Look to the Left or Right
    var FreeCameraKeyboardWalkInput = function () {
        this._keys = [];
        this.keysUp = [38];
        this.keysDown = [40];
        this.keysLeft = [37];
        this.keysRight = [39];
        this.keysSpace = [32];
        this.keysEnter = [13];
    }

    //Add attachment controls
    FreeCameraKeyboardWalkInput.prototype.attachControl = function (noPreventDefault) {
            var _this = this;
            var engine = this.camera.getEngine();
            var element = engine.getInputElement();
            if (!this._onKeyDown) {
                element.tabIndex = 1;
                this._onKeyDown = function (evt) {
                    if (_this.keysUp.indexOf(evt.keyCode) !== -1 ||
                        _this.keysDown.indexOf(evt.keyCode) !== -1 ||
                        _this.keysLeft.indexOf(evt.keyCode) !== -1 ||
                        _this.keysRight.indexOf(evt.keyCode) !== -1 ||
                        _this.keysEnter.indexOf(evt.keyCode) !== -1 ||
                        _this.keysSpace.indexOf(evt.keyCode) !== -1 ) {
                        var index = _this._keys.indexOf(evt.keyCode);
                        if (index === -1) {
                            _this._keys.push(evt.keyCode);
                        }
                        if (!noPreventDefault) {
                            evt.preventDefault();
                        }
                    }
                };
                this._onKeyUp = function (evt) {
                    if (_this.keysUp.indexOf(evt.keyCode) !== -1 ||
                        _this.keysDown.indexOf(evt.keyCode) !== -1 ||
                        _this.keysLeft.indexOf(evt.keyCode) !== -1 ||
                        _this.keysRight.indexOf(evt.keyCode) !== -1 ||
                        _this.keysEnter.indexOf(evt.keyCode) !== -1 ||
                        _this.keysSpace.indexOf(evt.keyCode) !== -1 ) {
                        var index = _this._keys.indexOf(evt.keyCode);
                        if (index >= 0) {
                            _this._keys.splice(index, 1);
                        }
                        if (!noPreventDefault) {
                            evt.preventDefault();
                        }
                    }
                };
                element.addEventListener("keydown", this._onKeyDown, false);
                element.addEventListener("keyup", this._onKeyUp, false);
            }
        };


        //Add detachment controls
        FreeCameraKeyboardWalkInput.prototype.detachControl = function () {
            var engine = this.camera.getEngine();
            var element = engine.getInputElement();
            if (this._onKeyDown) {
                element.removeEventListener("keydown", this._onKeyDown);
                element.removeEventListener("keyup", this._onKeyUp);
                BABYLON.Tools.UnregisterTopRootEvents([
                    { name: "blur", handler: this._onLostFocus }
                ]);
                this._keys = [];
                this._onKeyDown = null;
                this._onKeyUp = null;
            }
        };
        

        //Keys movement control by checking inputs
        FreeCameraKeyboardWalkInput.prototype.checkInputs = function () {
            if (this._onKeyDown) {
                var camera = this.camera;

                scene.onPointerDown = function(){
                    if(!document.pointerLockElement){
                        engine.enterPointerlock();
                    }
                }

                var camZ = camera.position.z;
                var camX = camera.position.x; 

                var canvas3x = canvas3.position.x;
                var canvas3z = canvas3.position.z;

                var canvas1x = canvas.position.x;
                var canvas1z = canvas.position.z;

                var canvas2x = canvas2.position.x;
                var canvas2z = canvas2.position.z;

                var canvas4x = canvas4.position.x;
                var canvas4z = canvas4.position.z;

                var canvas5x = canvas5.position.x;
                var canvas5z = canvas5.position.z;

                var canvas6x = canvas6.position.x;
                var canvas6z = canvas6.position.z;

                var canvas7x = canvas7.position.x;
                var canvas7z = canvas7.position.z;

                var canvas8x = canvas8.position.x;
                var canvas8z = canvas8.position.z;

                var canvas9x = canvas9.position.x;
                var canvas9z = canvas9.position.z;

                var exitX = exit.position.x;
                var exitZ = exit.position.z;

                var isNearCanvas3 = false;
                var isNearCanvas1 = false;
                var isNearCanvas2 = false;
                var isNearCanvas4 = false;
                var isNearCanvas5 = false;
                var isNearCanvas6 = false;
                var isNearCanvas7 = false;
                var isNearCanvas8 = false;
                var isNearCanvas9 = false;
                var isNearExit = false;

                        if(((camX - canvas3x) <= 17 && (camX - canvas3x) >= 0) && Math.abs(canvas3z - camZ) <= 12){
                            //enter store
                            //window.location.href = "/videoFashion.html";
                            //enterDialog.isVisible = true;
                            isNearCanvas3 = true;
                            viewDialog.isVisible = true;
                            hl.addMesh(canvas3, BABYLON.Color3.White());
                        } else if(((camZ - canvas1z) <= 20 && (camZ - canvas1z) >= 0) && Math.abs(canvas1x - camX) <= 10) {
                            hl.addMesh(canvas, BABYLON.Color3.White());
                            viewDialog.isVisible = true;
                            isNearCanvas1 = true;
                        } else if(((camZ - canvas2z) <= 20 && (camZ - canvas2z) >= 0) && Math.abs(canvas2x - camX) <= 10) {
                            hl.addMesh(canvas2, BABYLON.Color3.White());
                            viewDialog.isVisible = true;
                            isNearCanvas2 = true;
                        } else if(((canvas4z - camZ) <= 20 && (canvas4z - camZ) >= 0) && Math.abs(canvas4x - camX) <= 10) {
                            hl.addMesh(canvas4, BABYLON.Color3.White());
                            viewDialog.isVisible = true;
                            isNearCanvas4 = true;
                        } else if(((canvas5z - camZ) <= 20 && (canvas5z - camZ) >= 0) && Math.abs(canvas5x - camX) <= 10) {
                            hl.addMesh(canvas5, BABYLON.Color3.White());
                            isNearCanvas5 = true;
                            viewDialog.isVisible = true;
                        } else if(((canvas6z - camZ) <= 20 && (canvas6z - camZ) >= 0) && Math.abs(canvas6x - camX) <= 10) {
                            hl.addMesh(canvas6, BABYLON.Color3.White());
                            isNearCanvas6 = true;
                            viewDialog.isVisible = true;
                        } else if(((canvas7z - camZ) <= 20 && (canvas7z - camZ) >= 0) && Math.abs(canvas7x - camX) <= 10) {
                            hl.addMesh(canvas7, BABYLON.Color3.White());
                            isNearCanvas7 = true;
                            viewDialog.isVisible = true;
                        } else if(((camZ - canvas8z) <= 20 && (camZ - canvas8z) >= 0) && Math.abs(canvas8x - camX) <= 10) {
                            hl.addMesh(canvas8, BABYLON.Color3.White());
                            isNearCanvas8 = true;
                            viewDialog.isVisible = true;
                        } else if(((camZ - canvas9z) <= 20 && (camZ - canvas9z) >= 0) && Math.abs(canvas9x - camX) <= 10) {
                            hl.addMesh(canvas9, BABYLON.Color3.White());
                            isNearCanvas9 = true;
                            viewDialog.isVisible = true;
                        } else if(Math.abs(exitX - camX) <= 10 && Math.abs(exitZ - camZ) <= 10){
                            isNearExit = true;
                            exitDialog.isVisible = true;
                            //console.log("isnear");
                            hl.addMesh(exit, BABYLON.Color3.White());
                        }
                        else {
                            isNearCanvas3 =false;
                            isNearCanvas1 = false;
                            isNearCanvas2 = false;
                            isNearCanvas4 = false;
                            isNearCanvas5 = false;
                            isNearCanvas6 = false;
                            isNearCanvas7 = false;
                            isNearCanvas8 = false;
                            isNearCanvas9 = false;
                            isNearExit = false;

                            viewDialog.isVisible = false;
                            exitDialog.isVisible = false;

                            hl.removeMesh(canvas3);
                            hl.removeMesh(canvas);
                            hl.removeMesh(canvas2);
                            hl.removeMesh(canvas4);
                            hl.removeMesh(canvas5);
                            hl.removeMesh(canvas6);
                            hl.removeMesh(canvas7);
                            hl.removeMesh(canvas8);
                            hl.removeMesh(canvas9);
                            hl.removeMesh(exit);
                        }


                for (var index = 0; index < this._keys.length; index++) {
                    var keyCode = this._keys[index];
                    var speed = camera.speed;
                    if (this.keysLeft.indexOf(keyCode) !== -1) {
                            camera.rotation.y -= camera.angularSpeed;
                            camera.direction.copyFromFloats(0, 0, 0);
                    }
                    else if (this.keysUp.indexOf(keyCode) !== -1) {
                        camera.direction.copyFromFloats(0, 0, speed);
                    }
                    else if (this.keysRight.indexOf(keyCode) !== -1) {
                            camera.rotation.y += camera.angularSpeed;
                            camera.direction.copyFromFloats(0, 0, 0);
                    }
                    else if (this.keysDown.indexOf(keyCode) !== -1) {
                        camera.direction.copyFromFloats(0, 0, -speed);
                    } 
                    else if ((this.keysSpace.indexOf(keyCode) !== -1 ) || (this.keysEnter.indexOf(keyCode) !== -1 )) {
                        //camera.position.y += 1;
                        var x = document.getElementById("gallery-wrapper");

                        if(isNearCanvas3){
                            x = document.getElementById("gallery-wrapper");

                            x.style.display = "block";
                            x.style.opacity = "100%";
                            //exit pointerlock
                            engine.exitPointerlock();
                        } else if (isNearCanvas1) {
                            x = document.getElementById("gallery-wrapper2");

                            x.style.display = "block";
                            x.style.opacity = "100%";
                            engine.exitPointerlock();

                        } else if (isNearCanvas2) {
                            x = document.getElementById("gallery-wrapper2");

                            x.style.display = "block";
                            x.style.opacity = "100%";
                            engine.exitPointerlock();

                        } else if (isNearCanvas4) {
                            x = document.getElementById("gallery-wrapper2");

                            x.style.display = "block";
                            x.style.opacity = "100%";
                            engine.exitPointerlock();

                        }
                        else if (isNearCanvas5) {
                            x = document.getElementById("gallery-wrapper2");

                            x.style.display = "block";
                            x.style.opacity = "100%";
                            engine.exitPointerlock();

                        } else if (isNearCanvas6) {
                            x = document.getElementById("gallery-wrapper2");

                            x.style.display = "block";
                            x.style.opacity = "100%";

                            engine.exitPointerlock();
                        } else if (isNearCanvas7) {
                            x = document.getElementById("gallery-wrapper2");

                            x.style.display = "block";
                            x.style.opacity = "100%";

                            engine.exitPointerlock();
                        } else if (isNearCanvas8) {
                            x = document.getElementById("gallery-wrapper2");

                            x.style.display = "block";

                            engine.exitPointerlock();
                        } else if (isNearCanvas9) {
                            x = document.getElementById("gallery-wrapper2");

                            x.style.display = "block";
                            x.style.opacity = "100%";

                            engine.exitPointerlock();
                        } else if(isNearExit) {
                            window.location.href = "/promenade.html";
                        }
                        camera.direction.copyFromFloats(0, 0, 0);
                    } 
                    if (camera.getScene().useRightHandedSystem) {
                        camera.direction.z *= -1;
                    }
                    camera.getViewMatrix().invertToRef(camera._cameraTransformMatrix);
                    BABYLON.Vector3.TransformNormalToRef(camera.direction, camera._cameraTransformMatrix, camera._transformedDirection);
                    camera.cameraDirection.addInPlace(camera._transformedDirection);
                }
            }
        };

        //Add the onLostFocus function
        FreeCameraKeyboardWalkInput.prototype._onLostFocus = function (e) {
            this._keys = [];
        };

        //Add the two required functions for the control Name
        FreeCameraKeyboardWalkInput.prototype.getClassName = function () {
            return "FreeCameraKeyboardWalkInput";
        };

        FreeCameraKeyboardWalkInput.prototype.getSimpleName = function () {
            return "keyboard";
        };

    //Add the new keys input manager to the camera.
     camera.inputs.add(new FreeCameraKeyboardWalkInput());



    //The Mouse Manager to use the mouse (touch) to search around including above and below
    var FreeCameraSearchInput = function (touchEnabled) {
        if (touchEnabled === void 0) { touchEnabled = true; }
        this.touchEnabled = touchEnabled;
        this.buttons = [0, 1, 2];
        this.angularSensibility = 2000.0;
        this.restrictionX = 100;
        this.restrictionY = 60;
    }

    //add attachment control which also contains the code to react to the input from the mouse
    FreeCameraSearchInput.prototype.attachControl = function (noPreventDefault) {
        var _this = this;
        var engine = this.camera.getEngine();
        var element = engine.getInputElement();
        var angle = {x:0, y:0};
        if (!this._pointerInput) {
            this._pointerInput = function (p, s) {
                var evt = p.event;
                if (!_this.touchEnabled && evt.pointerType === "touch") {
                    return;
                }
                if (p.type !== BABYLON.PointerEventTypes.POINTERMOVE && _this.buttons.indexOf(evt.button) === -1) {
                    return;
                }
                if (p.type === BABYLON.PointerEventTypes.POINTERDOWN) {
                    try {
                        evt.srcElement.setPointerCapture(evt.pointerId);
                    }
                    catch (e) {
                        //Nothing to do with the error. Execution will continue.
                    }
                    _this.previousPosition = {
                        x: evt.clientX,
                        y: evt.clientY
                    };
                    if (!noPreventDefault) {
                        evt.preventDefault();
                        element.focus();
                    }
                }
                else if (p.type === BABYLON.PointerEventTypes.POINTERUP) {
                    try {
                        evt.srcElement.releasePointerCapture(evt.pointerId);
                    }
                    catch (e) {
                        //Nothing to do with the error.
                    }
                    _this.previousPosition = null;
                    if (!noPreventDefault) {
                        evt.preventDefault();
                    }
                }
                else if (p.type === BABYLON.PointerEventTypes.POINTERMOVE) {
                    if (!_this.previousPosition || engine.isPointerLock) {
                        return;
                    }
                    var offsetX = evt.clientX - _this.previousPosition.x;
                    var offsetY = evt.clientY - _this.previousPosition.y;
                    angle.x +=offsetX;
                    angle.y -=offsetY;
                    if(Math.abs(angle.x) > _this.restrictionX )  {
                        angle.x -=offsetX;
                    }
                    if(Math.abs(angle.y) > _this.restrictionY )  {
                        angle.y +=offsetY;
                    }
                    if (_this.camera.getScene().useRightHandedSystem) {
                        if(Math.abs(angle.x) < _this.restrictionX )  {
                            _this.camera.cameraRotation.y -= offsetX / _this.angularSensibility;
                        }
                    }
                    else {
                        if(Math.abs(angle.x) < _this.restrictionX )  {
                            _this.camera.cameraRotation.y += offsetX / _this.angularSensibility;
                        }
                    }
                    if(Math.abs(angle.y) < _this.restrictionY )  {
                        _this.camera.cameraRotation.x += offsetY / _this.angularSensibility;
                    }
                    _this.previousPosition = {
                        x: evt.clientX,
                        y: evt.clientY
                    };
                    if (!noPreventDefault) {
                        evt.preventDefault();
                    }
                }
            };
        }
        this._onSearchMove = function (evt) {
            if (!engine.isPointerLock) {
                return;
            }
            var offsetX = evt.movementX || evt.mozMovementX || evt.webkitMovementX || evt.msMovementX || 0;
            var offsetY = evt.movementY || evt.mozMovementY || evt.webkitMovementY || evt.msMovementY || 0;
            if (_this.camera.getScene().useRightHandedSystem) {
                _this.camera.cameraRotation.y -= offsetX / _this.angularSensibility;
            }
            else {
                _this.camera.cameraRotation.y += offsetX / _this.angularSensibility;
            }
            _this.camera.cameraRotation.x += offsetY / _this.angularSensibility;
            _this.previousPosition = null;
            if (!noPreventDefault) {
                evt.preventDefault();
            }
        };
        this._observer = this.camera.getScene().onPointerObservable.add(this._pointerInput, BABYLON.PointerEventTypes.POINTERDOWN | BABYLON.PointerEventTypes.POINTERUP | BABYLON.PointerEventTypes.POINTERMOVE);
        element.addEventListener("mousemove", this._onSearchMove, false);
    };

    //Add detachment control
    FreeCameraSearchInput.prototype.detachControl = function () {
        var engine = this.camera.getEngine();
        var element = engine.getInputElement();
        if (this._observer && element) {
            this.camera.getScene().onPointerObservable.remove(this._observer);
            element.removeEventListener("mousemove", this._onSearchMove);
            this._observer = null;
            this._onSearchMove = null;
            this.previousPosition = null;
        }
    };

    //Add the two required functions for names
    FreeCameraSearchInput.prototype.getClassName = function () {
        return "FreeCameraSearchInput";
    };

    FreeCameraSearchInput.prototype.getSimpleName = function () {
        return "MouseSearchCamera";
    };

    //Add the new mouse input manager to the camera
    camera.inputs.add(new FreeCameraSearchInput());



    return scene;
}
    var engine;
    try {
    engine = createDefaultEngine();
    } catch(e) {
    console.log("the available createEngine function failed. Creating the default engine instead");
    engine = createDefaultEngine();
    }
        if (!engine) throw 'engine should not be null.';
        scene = createScene();;
        sceneToRender = scene

        engine.runRenderLoop(function () {
            if (sceneToRender && sceneToRender.activeCamera) {
                sceneToRender.render();
            }
        });

        // Resize
        window.addEventListener("resize", function () {
            engine.resize();
        });
    </script>
        <!-- swiper -->

        <div id="gallery-wrapper" class="galWrap">
        <div id="gallery-box" onload="time()" onclick="hide()"> </div>
            <div class="swiper-container">
                <div class="swiper-wrapper">
                <div class="swiper-slide" class="noSwipingClass">Slide 1</div>
                    <model-viewer id="model" src="/AR/UntitledArt.glb" ar ar-modes="webxr scene-viewer quick-look" ar-scale="auto" camera-controls alt="test" ios-src="/AR/art.usdz">
                    </model-viewer>
                    <img id="qr" src="/images/artQR.png">
                    <h1 id="qr-text">Scontcan To View in AR</h1>
                <div class="swiper-slide">Untitled Art by Joelius Dubiois<br>$50</div>
                </div>
                <!-- Add Pagination -->
                <div class="swiper-pagination"></div>
                <!-- Add Arrows -->
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div> 
            <a href="#" id="button1" class="button">Add To Cart</a>
        </div>   

        <div id="gallery-wrapper2" class="galWrap">
            <div id="gallery-box2" onload="time()" onclick="hide()"> </div>
                <div class="swiper-container">
                    <div class="swiper-wrapper">
                    <div class="swiper-slide">This item is not currently available for view.</div>
                    </div>
                    <!-- Add Pagination -->
                    <div class="swiper-pagination"></div>
                    <!-- Add Arrows -->
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                </div> 
                <a href="#" id="button2" class="button">Add To Cart</a>
            </div>   

            <!-- Initialize Swiper -->
            <script>
                var swiper = new Swiper('.swiper-container', {
                spaceBetween: 30,
                centeredSlides: true,
                allowTouchMove: false,
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                });

                window.addEventListener("load", function(){
                var x = document.getElementById("gallery-wrapper");
                var a = document.getElementById("gallery-wrapper2");
                        setTimeout(function() {x.style.display = "none"; a.style.display = "none";}, 1000);
                })

                function hide() {
                    var x = document.getElementById("gallery-wrapper");
                    var a = document.getElementById("gallery-wrapper2");
                    var y = document.getElementsByClassName('galWrap');


                    x.style.opacity = "0%";
                    x.style.display = "none";
                    a.style.opacity = "0%";
                    a.style.display = "none";
                }
            </script>
        </div>>

</body>
</html>
